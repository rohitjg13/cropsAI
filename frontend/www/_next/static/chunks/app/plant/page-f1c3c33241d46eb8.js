(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{281:(e,t,s)=>{Promise.resolve().then(s.bind(s,1759))},1759:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),l=s(4085),i=s(5631),n=s(6418),r=s(5565),c=s(2115),o=s(5683),d=s(3478),x=s(9534);let m=e=>{let{card:t}=e;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Crop:"})," ",t.crop_name]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Description:"})," ",t.crop_description]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Disease:"})," ",t.disease_name]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Disease Description:"})," ",t.disease_description]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Causes:"})," ",t.causes]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Symptoms:"})," ",t.symptoms]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Prevention:"})," ",t.prevention_measures]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Treatment:"})," Fertilizers: ",t.treatment.fertilizers,", Pesticides: ",t.treatment.pesticides,", Biological Control: ",t.treatment.biological_control]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Climatic Factors:"})," ",t.climatic_factors]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Soil Requirements:"})," ",t.soil_requirements]}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("strong",{children:"Rotation Suggestions:"})," ",t.crop_rotation_suggestions]})]})};function h(e){let{cards:t}=e,[s,l]=(0,c.useState)(null),[i,n]=(0,c.useState)(t||[]),h=(0,c.useRef)(null),g=(0,c.useId)();return(0,c.useEffect)(()=>{t||async function(){try{let e=await fetch("/data/plant-cards.json"),t=await e.json();n(t)}catch(e){console.error("Error fetching plant cards",e)}}()},[t]),(0,c.useEffect)(()=>{function e(e){"Escape"===e.key&&l(null)}return document.body.style.overflow=s?"hidden":"auto",window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s]),(0,x.j)(h,()=>l(null)),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.N,{children:s&&(0,a.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 h-full w-full z-10"})}),(0,a.jsx)(o.N,{children:s?(0,a.jsxs)("div",{className:"fixed inset-0 grid place-items-center z-[100]",children:[(0,a.jsx)(d.P.button,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.05}},className:"flex absolute top-2 right-2 lg:hidden items-center justify-center bg-white rounded-full h-6 w-6",onClick:()=>l(null),children:(0,a.jsx)(u,{})},"button-".concat(s.disease_name,"-").concat(g)),(0,a.jsxs)(d.P.div,{layoutId:"card-".concat(s.disease_name,"-").concat(g),ref:h,className:"w-full max-w-[500px] h-full md:h-fit md:max-h-[80%] flex flex-col bg-white dark:bg-neutral-900 sm:rounded-3xl overflow-hidden shadow-lg",children:[(0,a.jsx)(d.P.div,{layoutId:"image-".concat(s.disease_name,"-").concat(g),children:(0,a.jsx)(r.default,{priority:!0,width:200,height:200,src:s.image,alt:s.disease_name,className:"w-full h-60 lg:h-60 sm:rounded-tr-lg sm:rounded-tl-lg object-cover object-top"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-start p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(d.P.h3,{layoutId:"title-".concat(s.disease_name,"-").concat(g),className:"font-bold text-neutral-700 dark:text-neutral-200 text-2xl",children:s.disease_name}),(0,a.jsx)(d.P.p,{layoutId:"description-".concat(s.disease_description,"-").concat(g),className:"text-neutral-600 dark:text-neutral-400 text-sm mt-2",children:s.disease_description})]})}),(0,a.jsx)("div",{className:"pt-4 relative px-4",children:(0,a.jsx)(d.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-neutral-600 dark:text-neutral-400 text-lg md:text-xl max-h-[50vh] pb-8 flex flex-col items-start gap-4 overflow-auto",children:s.content?s.content():(0,a.jsx)(m,{card:s})})})]})]})]}):null}),(0,a.jsx)("ul",{className:"max-w-2xl mx-auto w-full gap-4",children:i.map(e=>(0,a.jsxs)(d.P.div,{layoutId:"card-".concat(e.disease_name,"-").concat(g),onClick:()=>l(e),className:"p-4 flex flex-row items-center border border-black hover:border-green-500 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-xl cursor-pointer transition-all duration-200 w-full max-w-lg",children:[(0,a.jsx)(d.P.div,{layoutId:"image-".concat(e.disease_name,"-").concat(g),className:"flex-shrink-0",children:(0,a.jsx)(r.default,{width:100,height:100,src:e.image,alt:e.disease_name,className:"h-24 w-24 rounded-lg object-cover object-top"})}),(0,a.jsxs)("div",{className:"flex flex-col ml-4 flex-grow",children:[(0,a.jsx)(d.P.h3,{layoutId:"title-".concat(e.disease_name,"-").concat(g),className:"font-medium text-neutral-800 dark:text-neutral-200 text-left text-lg",children:e.disease_name}),(0,a.jsx)(d.P.p,{layoutId:"description-".concat(e.disease_description,"-").concat(g),className:"text-neutral-600 dark:text-neutral-400 text-left text-sm line-clamp-2",children:e.disease_description})]})]},"card-".concat(e.disease_name,"-").concat(g)))})]})}let u=()=>(0,a.jsxs)(d.P.svg,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.05}},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-black",children:[(0,a.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,a.jsx)("path",{d:"M18 6l-12 12"}),(0,a.jsx)("path",{d:"M6 6l12 12"})]});var g=s(2125),p=s(6422);let f=[{text:"Uploading Image"},{text:"Analyzing Image"},{text:"Detecting Plant Type"},{text:"Getting More info"},{text:"Getting response back"},{text:"Hang tight, we're working our magic!"},{text:"Almost there, just a moment longer..."},{text:"Good things take a little time!"},{text:"Stay tuned, finishing up!"},{text:"Just a few more seconds..."},{text:"Prepare to be amazed!"}];function j(){let[e,t]=(0,c.useState)([]),[s,r]=(0,c.useState)(!1),[o,d]=(0,c.useState)([]),x=async()=>{if(0===e.length)return;r(!0);let t=new FormData;t.append("image",e[0]);try{let e=await fetch("http://".concat("127.0.0.1:6942","/cropPrediction"),{method:"POST",body:t});if(!e.ok)throw Error("Request failed");let s=await e.json();if(s.image){let e=s.image;e.startsWith("data:")||(e="data:image/jpeg;base64,".concat(e));let t=function(e){let t=atob(e.split(",")[1]),s=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),l=new Uint8Array(a);for(let e=0;e<t.length;e++)l[e]=t.charCodeAt(e);return new Blob([a],{type:s})}(e);s.image=URL.createObjectURL(t)}console.log(s),d([s,...o])}catch(e){console.error("Error during prediction:",e)}finally{r(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(g.b,{loadingStates:f,loading:s,duration:2e3}),(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 z-50",children:(0,a.jsx)(n.V,{})}),(0,a.jsx)("main",{className:"relative min-h-screen overflow-y-auto pt-[32px] pb-[32px] bg-white",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,a.jsx)("div",{className:"mt-8 flex justify-center w-full",children:(0,a.jsx)(i.e,{onChange:e=>{t(e),console.log(e)}})}),(0,a.jsx)("div",{className:"flex justify-center w-full",children:(0,a.jsx)(l.$,{onClick:x,className:"text-sm w-auto h-auto",children:"Continue"})})]}),o.length>0&&(0,a.jsx)(h,{cards:o})]})}),(0,a.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 z-50",children:(0,a.jsx)(n.d,{})}),s&&(0,a.jsx)("button",{className:"fixed top-4 right-4 text-black dark:text-white z-[120]",onClick:()=>r(!1),children:(0,a.jsx)(p.A,{className:"h-10 w-10"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[813,889,441,587,358],()=>t(281)),_N_E=e.O()}]);